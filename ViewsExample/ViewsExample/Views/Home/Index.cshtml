@* @using ViewsExample.Models *@
@model IEnumerable<Person> 
@{
    string? title = ViewData["title"] as string;
    // Person person = new Person
    // {
    //     Name = "Fba Nabil",
    //     DateOfBirth = Convert.ToDateTime("2002-10-04"),
    //     DateOfBirth = null,
    //     PersonGender=Gender.Male
    // };

    // List<Person> people = new List<Person>
    // {
    //     new Person
    //     {
    //         Name = "Fba Nabil",
    //         DateOfBirth = Convert.ToDateTime("2002-10-04"),
    //         PersonGender=Gender.Male
    //     },
    //     new Person
    //     {
    //         Name = "Denesh Barua",
    //         DateOfBirth = Convert.ToDateTime("2002-06-19"),
    //         PersonGender=Gender.Other
    //     }
    //     ,new Person
    //     {
    //         Name = "Atfan Bin Nur",
    //         DateOfBirth = Convert.ToDateTime("2000-03-24"),
    //         PersonGender=Gender.Male
    //     }
    // };

    //List<Person>? people = ViewData["people"] as List<Person>;
    List<Person>? people = ViewBag.people;

    // If no key then viewbag returns null
}

@{
    double? GetAge(DateTime? dateOfBirth)
    {
        if (dateOfBirth.HasValue)
        {
            return Math.Round((DateTime.Now - dateOfBirth.Value).TotalDays / 365.25, 2);
        }
        return null;
    };
}

@functions{
    // methods, Fields, Property
    public string GetGreeting()
    {
        return "Class!";
    }

    string name { get; set; } = "to ";
}

@{

    string alertMessage = $"<script>alert('{people.Count} people found')</script>";
}


<!DOCTYPE html>
<html>
    <head>
        <title>@title</title>
        <meta charset="utf-8">
    <link rel="stylesheet" href="~/StyleSheet.css">
     </head>
<body>
    <div class="page-content">
    
    @* @Html.Raw(@alertMessage) *@

    <h1>Persons</h1>
    <h1>@name @GetGreeting()</h1>
    @* <h2>Hello @person.Name</h2>
    @if (person.DateOfBirth.HasValue)
    {
        double age = Math.Round((DateTime.Now - person.DateOfBirth).Value.TotalDays/ 365.25);
        <h3>@age years old</h3>
    }
    else
    {
        <h3>Age not provided</h3>
    } *@


    @* @switch (person.PersonGender)
    {
        case Gender.Male:
            <p>November 19 is International Men's Day</p>
            break;     
        case Gender.Female:
            <p>March 8 is International</p>
            break;
        case Gender.Other:
            <p>🗑️🗑️🗑️🗑️🗑️🗑️🗑️🗑️🗑️</p>
            break;
    } *@


    @foreach(Person person in Model)
    {
        <div class="box float-left w-50">

            
            <h3>@person.Name</h3>

            <table class="table w-100">
                <tbody>
                    <tr>
                        <td>Gender :</td>
                        <td>@person.PersonGender</td>
                    </tr>
                        <tr>
                            <td>Date of Birth :</td>
                            <td>@person.DateOfBirth?.ToString("MM/dd/yyyy")</td>
                        </tr>
                </tbody>
            </table>
           <div>
                    <a href="/person-details/@person.Name">Details</a>
           </div>

            
            @* <span>, </span>
            <span>@person.PersonGender</span>
            @if(person.DateOfBirth.HasValue)
            {
                double age = Math.Round((DateTime.Now - person.DateOfBirth).Value.TotalDays / 365.25);
                <span>, </span>
                <span>@age years old</span>
            }
            else
            {
                <span>, Age not provided</span>
            } *@
        </div>
    }
        <div>
            <a href="/person-with-product">Person With Product</a>
        </div>
    <br>

    @* @for(int i= 0; i < people.Count; i++)
    {
        @:People Details:
        <text>Hello To You All</text>
        
        <div>
            @people[i].Name
            <span>, </span>
            <span>@people[i].PersonGender</span>
            @if(people[i].DateOfBirth.HasValue)
            {
                double age = Math.Round((DateTime.Now - people[i].DateOfBirth).Value.TotalDays / 365.25);
                <span>, </span>
                <span>@age years old</span>
                <span>, </span> 
                <span>@GetAge(people[i].DateOfBirth) years old</span>
            }
            else
            {
                <span>, Age not provided</span>
            }
        </div>
    } *@

    </div>
</body>
</html>
